package com.AlFurkan.Fragments;


import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.content.SharedPreferences;
import android.graphics.Color;
import android.graphics.Typeface;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.Toast;

import androidx.collection.CircularArray;
import androidx.core.content.res.ResourcesCompat;
import androidx.fragment.app.Fragment;
import androidx.lifecycle.Observer;
import androidx.lifecycle.ViewModelProviders;
import androidx.recyclerview.widget.LinearLayoutManager;
import androidx.recyclerview.widget.RecyclerView;

import com.AlFurkan.APIS.RecitersResponse.RecitersItem;
import com.AlFurkan.Activities.HomePage;
import com.AlFurkan.Adapters.ListeningQuranAdapter;
import com.AlFurkan.Adapters.SpinnerAdapter;
import com.AlFurkan.Classes.AzkarMediaPlayer;
import com.AlFurkan.Classes.MediaPlayerManager;
import com.AlFurkan.Classes.SelectedItem;
import com.AlFurkan.Modules.OnlineSwarListen;
import com.AlFurkan.Service.AzkarListenService;
import com.AlFurkan.Service.QuranService;
import com.AlFurkan.ViewModels.RecitersVM;
import com.google.AlFurkan.R;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.Objects;

/**
 * A simple {@link Fragment} subclass.
 */
public class ListeningFragment extends Fragment {


    protected Spinner recitersSpinner;
    protected RecyclerView swarListenRecyclerview;
    private ListeningQuranAdapter listeningQuranAdapter;
    RecitersVM recitersViewModel;
    private ArrayList<RecitersItem> recitersResponse;
    SharedPreferences preferences, servicePref;
    private String QAREE_POS = "qareePos";
    private String SURA_POS = "suraPos";

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        View view = inflater
                .inflate(R.layout.listening_fragment, container, false);
        preferences = getActivity().getSharedPreferences("listinigFragment", Context.MODE_PRIVATE);
        servicePref = getActivity().getSharedPreferences("quranService", Context.MODE_PRIVATE);
        this.getActivity().registerReceiver(receiver, new IntentFilter("Online_Track"));
        initView(view);
        setUpView();
        return view;
    